import argparse
import time

from egais import get_fsrar_id

parser = argparse.ArgumentParser()
parser.add_argument('--cmd', help='command like resend, act')
parser.add_argument('--ttn', help='ttn')
parser.add_argument('--fb', help='fb')
parser.add_argument('--utm-url', help='utm_url')
args = parser.parse_args()

from egais import query_bcode

fb=[
'FB-000007659082615',
'FB-000007659082623',
'FB-000007659082630',
'FB-000007688446270',
'FB-000007910743232',
'FB-000007910743235',
'FB-000007990059198',
'FB-000007990059204',
'FB-000007990059206',
'FB-000008031248891',
'FB-000008059991028',
]

fb_most = ["FB-000007420476199",
"FB-000007420476209",
"FB-000007420476210",
"FB-000007423766726",
"FB-000007466993317",
"FB-000007567820291",
"FB-000007567820300",
"FB-000007584367705",
"FB-000007584367721",
"FB-000007623425344",
"FB-000007623425346",
"FB-000007623425362",
"FB-000007658662621",
"FB-000007658662630",  #  <--dj --
"FB-000007707478235",
"FB-000007707478245",
"FB-000007716572503",
"FB-000007716572505",
"FB-000007716572506",
"FB-000007716572509",
"FB-000007725958205",
"FB-000007725958211",
"FB-000007725958127",
"FB-000007735225394",
"FB-000007735225398",
"FB-000007735225403",
"FB-000007735225404",
"FB-000007735225410",
"FB-000007735225411",
"FB-000007735225416",
"FB-000007745346247",
"FB-000007745346248",
"FB-000007745346262",
"FB-000007764802068",
"FB-000007764802078",
"FB-000007764802094",
"FB-000007784306933",
"FB-000007784306938",
"FB-000007784306947",
"FB-000007784306953",
"FB-000007784306961",
"FB-000007784306974",
"FB-000007793889320",
"FB-000007807485580",
"FB-000007920854001",
"FB-000007942462574",
"FB-000007942462579",
"FB-000007942462601",
"FB-000007964143615",
"FB-000007986120823",
"FB-000007986120832",
"FB-000007986120841",
"FB-000007997040442",
"FB-000007725958198",
"FB-000007725958207",
"FB-000007735225392",
"FB-000007735225402",
"FB-000007735225408",
"FB-000007735225409",
"FB-000007764802075",
"FB-000007784306941",
"FB-000007784306960",
"FB-000007784306966",
"FB-000007784306972",
"FB-000007986120817",
"FB-000007986120838",
"FB-000007997040447",
"FB-000007623425342",
"FB-000007784306955",
"FB-000007964143623",
"FB-000007964143637", # <---
"FB-000007986120816",
"FB-000007997040438",
"FB-000007997040443",
"FB-000007735225401",
"FB-000007964143619",]


utm_url = args.utm_url or 'http://localhost:8080'
fsrar_id = get_fsrar_id(utm_url)

for fb_x in reversed(fb):
    print(fb_x)
    q = query_bcode(utm_url, fsrar_id, fb_x)
    print(q.text)
    time.sleep(60*35)
